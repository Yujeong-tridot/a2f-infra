apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: avadot-prod

# Base 매니페스트 참조
resources:
  - ../../base/backend
  - ../../base/tarot
  - ../../base/blind_date
  - ../../base/custom_chat
  - ../../base/concierge
  - ../../base/fact_worker
  - ../../base/hpa
  - ../../base/pdb
  - ingress.yaml

# Prod 환경용 패치
patchesStrategicMerge:
  - all-services-env-patch.yaml
  - all-services-command-patch.yaml

# Prod 환경 설정 (replica 수 등)
replicas:
  - name: backend
    count: 2
  - name: tarot
    count: 2
  - name: blind-date
    count: 2
  - name: custom-chat
    count: 2
  - name: concierge
    count: 2
  - name: fact-worker
    count: 1
